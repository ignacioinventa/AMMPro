(function(a,b){function i(b){var c=new Image;a(c).css("display","none");a(c).attr("src",b);a(c).load(function(){var b=a("body").find("#fh_lbox");b.find("#fh_lightbox-main-loader").animate({opacity:"0.3"},{duration:500,complete:function(){var b=a(this);b.remove()}});g()})}function h(){var a;if(self.pageYOffset){a=self.pageYOffset}else if(document.documentElement&&document.documentElement.scrollTop){a=document.documentElement.scrollTop}else if(document.body){a=document.body.scrollTop}return a}function g(b){var c=a(window);var f=a("body").find("#fh_lboxoverlay");var g=a("body").find("#fh_lbox");var h=a("body").find("#fh_lightbox_info_box");var i=a("body").find("#fh_lightbox_holder_closebutton");var j=0;if(d()||e())j=jQuery(window).scrollTop();f.css({width:c.width()+"px",height:c.height()+150+"px",top:j+"px"});g.stop();var k=g.find("img:first").width();var l=g.find("img:first").height();if(k==0||k==null||k==NaN)k=100;if(l==0||l==null||l==NaN)l=100;var m=k;if(k+h.width()<a(window).width()){m=k+h.width();var n=k+Math.round((a(window).width()-m)/2)}else{n=k+Math.round((a(window).width()-k)/2)-h.outerWidth()}g.animate({top:j+Math.round((a(window).height()-l)/2)+"px",left:Math.round((a(window).width()-m)/2)+"px",width:k+"px",opacity:"1.0",height:l+"px"},{duration:300,queue:false});i.stop();i.animate({top:j+(0-i.height()/2+Math.round((a(window).height()-l)/2))+"px",left:0-i.width()/2+Math.round((a(window).width()-m)/2)+k+"px",opacity:"1.0"},{duration:300,queue:false});h.stop();h.animate({top:j+Math.round((a(window).height()-l)/2)+"px",left:n+"px",opacity:"1.0"},{duration:300,queue:false})}function f(){var c=a(this);var f=a('<div id="fh_lboxoverlay" class="fh_lightbox_overlay"></div>');a("body").append(f);var h=f.css("opacity");var j=0;if(d()||e())j=jQuery(window).scrollTop();f.css({width:a(window).width()+"px",height:a(window).height()+150+"px",opacity:"0.0",top:j+"px"});f.animate({opacity:h},{duration:500,queue:false});var k=a('<div id="fh_lbox" class="fh_lightbox_holder"></div>');k.css({opacity:"0.0"});k.css({top:j+Math.round((a(window).height()-k.outerHeight())/2)+"px",left:Math.round((a(window).width()-k.outerWidth())/2)+"px","margin-top":0,"margin-left":0});k.animate({opacity:"1.0"},{duration:900,queue:false});var l=a('<div id="fh_lightbox-main-loader"></div>');l.css({opacity:"0.0"});l.animate({opacity:"1.0"},{duration:900,queue:false});k.append(l);var m=a('<div id="fh_lightbox_holder_closebutton" class="fh_lightbox_holder_closebutton"></div>');m.css({opacity:"0.0"});m.animate({opacity:"1.0"},{duration:900,queue:false});m.css({top:j+(0-m.height()/2+Math.round((a(window).height()-k.outerHeight())/2))+"px",left:0-m.width()/2+k.width()+Math.round((a(window).width()-k.outerWidth())/2)+"px","margin-top":0,"margin-left":0});var n=a('<div id="fh_lightbox_info_box" class="fh_lightbox_info_box"></div>');n.css({opacity:"0.0"});n.css({top:j+Math.round((a(window).height()-k.outerHeight())/2)+"px",left:Math.round(a(window).width()/2)+"px"});if(decodeURI(c.find("img:first").attr("title"))!=b)var o=a('<div class="title">'+decodeURI(c.find("img:first").attr("title"))+"</div>");if(decodeURI(c.find("img:first").attr("title"))!=b)var p=a('<div class="content">'+decodeURI(c.find("img:first").attr("alt"))+"</div>");o.find("img").remove();p.find("img").remove();var q=c.find("img:first").attr("ref");if(q==b)q=c.parent().find("a").attr("href");if(q==b)q=c.find("img:first").attr("src");var r=a('<div class="twitter"><div class="social_tab"><a href="http://twitter.com/share" class="twitter-share-button" data-url="'+self.location.href+"?pic="+q+'" data-count="horizontal">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></div></div>');var s=a('<div class="facebook"><div class="social_tab"><iframe src="http://www.facebook.com/plugins/like.html?app_id=209611125764047&href='+q+'&send=false&layout=button_count&width=80&show_faces=false&action=like&colorscheme=light&font=verdana&height=21" style="width:80px; height:21px;"></iframe></div></div>');var t=a('<div class="googleplus"><!-- +1 Button from plus.google.com --><div class="social_tab"><script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script><g:plusone size="medium" href="'+q+'"></g:plusone></div></div>');var u=a('<div id="socials"></div>');n.append(u);u.append(r).append(s).append(t);u.find("div").hover(function(){var b=a(this).find(".social_tab");b.show();b.stop(true,true);b.animate({top:"-36px",opacity:1},{duration:200,queue:false})},function(){var b=a(this).find(".social_tab");b.stop(true,true);b.animate({top:"-60px",opacity:"0.0"},{duration:0,queue:false})});n.append('<div style="clear:both" class="divider"></div>');if(o.html()!="undefined")n.append(o);if(p.html()!="undefined")n.append(p);var v=a('<img style="position:absolute;top:0px;left:0px;" src="'+q+'">');k.append(v);a("body").append(k);a("body").append(m);a("body").append(n);k.hover(function(){var b=a(this);var c=a("body").find("#fh_lbox");var d=a("body").find("#fh_lightbox_info_box");if(c.width()+c.position().left>d.position().left){d.stop();d.animate({opacity:"0.0"},{duration:500,queue:false})}},function(){var b=a(this);var c=a("body").find("#fh_lightbox_info_box");c.stop();c.animate({opacity:"1.0"},{duration:300,queue:false})});f.click(function(){a("body").unbind();a("body").find("#fh_lboxoverlay").remove();a("body").find("#fh_lbox").remove();a("body").find("#fh_lightbox_holder_closebutton").remove();a("body").find("#fh_lightbox_info_box").remove()});m.click(function(){a("body").unbind();a("body").find("#fh_lboxoverlay").remove();a("body").find("#fh_lbox").remove();a("body").find("#fh_lightbox_holder_closebutton").remove();a("body").find("#fh_lightbox_info_box").remove()});a(window).bind("resize scroll",g);i(q);g(true)}function e(){var a=navigator.userAgent.match(/iPad/i);return a}function d(){var a=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i);return a}function c(){var a=[],b;var c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var d=0;d<c.length;d++){b=c[d].split("=");a.push(b[0]);a[b[0]]=b[1]}return a}a.fn.extend({fhboxer:function(b){var d={hover_round:"false"};b=a.extend({},a.fn.fhboxer.defaults,b);return this.each(function(){var d=a(this);d.wrap('<div class="item_lightbox_container"></div>');var e=d.parent();d.css({cursor:"pointer"});var g=b;if(c()["pic"]!=null){var h=a('<div class="item_lightbox_container"><img src="'+c()["pic"]+'"></img></div>');if(a("body").data("img-opened")!=1){h.each(f);a("body").data("img-opened",1)}}e.hover(function(){var b=a(this).find("img");var c=b.position().top+parseInt(b.css("padding-top"))+parseInt(b.css("margin-top"))+parseInt(b.css("border-top-width"));var d=b.position().left+parseInt(b.css("padding-left"))+parseInt(b.css("margin-left"))+parseInt(b.css("border-left-width"));var e=a('<div class="draw_layer_over_item"></div>');if(g.hover_round=="true")e.css({"-webkit-border-radius":b.width()/2+"px","-moz-border-radius":b.width()/2+"px","border-radius":b.width()/2+"px"});var f=a('<div class="layer_over_item_plus"></div>');e.data("overopacity",e.css("opacity"));b.parent().append(e);b.parent().append(f);var h=b.width();var i=b.height();if(b.width()>b.parent().width())h=b.parent().width();if(b.height()>b.parent().height())i=b.parent().height();e.css({width:h+"px",height:i+"px",top:c+"px",left:d+"px",display:"block",opacity:"0.0"});f.css({left:d+h/2-17+"px",top:c+i/2-17+"px",opacity:"0.0"});f.animate({opacity:"1"},{duration:300,queue:false});e.animate({opacity:"0.8"},{duration:300,queue:false})},function(){var b=a(this);b.parent().find(".draw_layer_over_item").remove();b.parent().find(".layer_over_item_plus").remove()});e.click(f)})}});})(jQuery)